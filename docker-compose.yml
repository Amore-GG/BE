version: "3.8"

services:
  voice-api:
    image: ghcr.io/nninji/amore-ai-voice:latest
    container_name: voice-api
    ports:
      - "1000:1000"
    environment:
      - ENV=production
      - PYTHONUNBUFFERED=1
    volumes:
      - voice_output:/app/generated_audio
    restart: always
    deploy:
      resources:
        limits:
          memory: 8G

  lip-api:
    image: ghcr.io/nninji/amore-ai-lip:latest
    container_name: lip-api
    ports:
      - "2000:2000"
    environment:
      - ENV=production
      - PYTHONUNBUFFERED=1
    volumes:
      - lip_output:/app/results
      - lip_uploads:/app/uploads
    restart: always
    deploy:
      resources:
        limits:
          memory: 4G

volumes:
  voice_output:
  lip_output:
  lip_uploads: