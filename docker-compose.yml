version: "3.8"

services:
  voice-api:
    build:
      context: ./voice/zonos_api_package
      dockerfile: Dockerfile
    container_name: voice-api-dev
    ports:
      - "1000:1000"
    environment:
      - ENV=dev
      - PYTHONUNBUFFERED=1
    volumes:
      - voice_output:/app/generated_audio
    restart: unless-stopped

  lip-api:
    build:
      context: ./lip/Wav2Lip-master
      dockerfile: Dockerfile
    container_name: lip-api-dev
    ports:
      - "2000:2000"
    environment:
      - ENV=dev
      - PYTHONUNBUFFERED=1
    volumes:
      - lip_output:/app/results
      - lip_uploads:/app/uploads
    restart: unless-stopped

  elevenlabs-api:
    build:
      context: ./voice/eleven_labs
      dockerfile: Dockerfile
    container_name: elevenlabs-api-dev
    ports:
      - "1100:1100"
    environment:
      - ENV=dev
      - PYTHONUNBUFFERED=1
      - ELEVENLABS_API_KEY=${ELEVENLABS_API_KEY}
    volumes:
      - elevenlabs_output:/app/generated_audio
    restart: unless-stopped

volumes:
  voice_output:
  lip_output:
  lip_uploads:
  elevenlabs_output: